{% extends 'layout.html' %}

{% block content %}
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
    {% for category, message in messages %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
{% endif %}
{% endwith %}

<div class="row">
    <h1>Agregar Acueducto</h1>
    <div class="col-md-5">
        <div class="card card-body">
            <div class="col-md-7 offset-md-2">
                <form action="/agregar_acueducto" method="POST">
                    <div class="form-floating mb-1">
                        <input type="text" class="form-control" id="floatingNombre" name="nombre" placeholder="Nombre" required>
                        <label for="floatingNombre">Nombre</label>
                    </div>
                    <div class="form-floating mb-1">
                        <input type="text" class="form-control" id="floatingUbicacion" name="ubicacion" placeholder="Ubicación" required>
                        <label for="floatingUbicacion">Ubicación</label>
                    </div>
                    <div class="form-floating mb-1">
                        <input type="date" class="form-control" id="floatingFechaAnalisis" name="fecha_analisis" placeholder="Fecha de Análisis" required>
                        <label for="floatingFechaAnalisis">Fecha de Análisis</label>
                    </div>
                    <div class="form-floating mb-1">
                        <input type="number" class="form-control" id="floatingPh" name="ph" placeholder="pH">
                        <label for="floatingPh">pH</label>
                    </div>
                    <div class="form-floating mb-1">
                        <input type="number" class="form-control" id="floatingClorox" name="clorox" placeholder="Clorox">
                        <label for="floatingClorox">Clorox</label>
                    </div>
                    <div class="form-floating mb-1">
                        <input type="number" class="form-control" id="floatingBacterias" name="bacterias" placeholder="Bacterias">
                        <label for="floatingBacterias">Bacterias</label>
                    </div>
                    <div class="form-floating mb-1">
                        <input type="text" class="form-control" id="floatingDescripcion" name="descripcion" placeholder="Descripción">
                        <label for="floatingDescripcion">Descripción</label>
                    </div>
                    <div class="form-floating mb-1">
                        <select name="departamento" id="floatingDepartamento" class="form-select" required>
                            <option value="" disabled selected>Selecciona un Departamento</option>
                            {% for departamento in departamentos %}
                            <option value="{{ departamento }}">{{ departamento }}</option>
                            {% endfor %}
                        </select>
                        <label for="floatingDepartamento">Departamento</label>
                    </div>
                    <div class="form-floating mb-1">
                        <select name="identificacion_funcionario" id="floatingFuncionario" class="form-select" required>
                            <option value="" disabled selected>Selecciona un Funcionario</option>
                            {% for funcionario in funcionarios %}
                            <option value="{{ funcionario[0] }}">{{ funcionario[0] }} / {{ funcionario[1] }}</option>
                            {% endfor %}
                        </select>
                        <label for="floatingFuncionario">Funcionario</label>
                    </div>
                    <div class="d-grid gap-2 pt-2">
                        <button type="submit" class="btn btn-outline-primary">Guardar</button>
                        <a href="{{ url_for('editar_acueducto') }}" class="btn btn-outline-primary">Editar acueducto</a>
                        <a href="{{ url_for('eliminar_acueducto') }}" class="btn btn-outline-primary">Eliminar acueducto</a>
                        <a href="{{ url_for('ventanaprincipal') }}" class="btn btn-outline-primary">Ventana Principal</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="col-md-7">
        <div class="card card-body " style= "width: 1000px"> <!-- Utilizamos h-100 para hacer que el card-body ocupe toda la altura disponible -->
             <!-- Utilizamos table-responsive para hacer que la tabla sea responsive en dispositivos pequeños -->
                <table class="table table-striped table-bordered bg-white table-sm">
                    <!-- Encabezados de la tabla -->
                    <thead>
                        <tr>
                            <!-- Clases de columnas para controlar el ancho de cada columna -->
                            <th class="col-md-2">Nombre</th>
                            <th class="col-md-2">Ubicación</th>
                            <th class="col-md-5">Fecha Análisis</th> 
                            <th class="col-md-4">pH</th> 
                            <th class="col-md-1">Clorox</th> 
                            <th class="col-md-1">Bacterias</th>     
                            <th class="col-md-3">Descripción</th> 
                            <th class="col-md-1">Departamento</th> 
                            <th class="col-md-1">ID Funcionario</th> 
                            <th class="col-md-3">Create</th>
                            <th class="col-md-3">Update</th>
                            <th class="col-md-3">User Create</th>
                            <th class="col-md-3">User Update</th>
                        </tr>
                    </thead>
                    <!-- Cuerpo de la tabla -->
                    <tbody>
                        <!-- Iteramos sobre los datos de los acueductos -->
                        {% for acueducto in acueductos %}
                        <tr>
                            <!-- Mostramos los datos de cada acueducto en las columnas correspondientes -->
                            <td>{{ acueducto[1] }}</td>
                            <td>{{ acueducto[2] }}</td>
                            <td>{{ acueducto[3] }}</td>
                            <td>{{ acueducto[4] }}</td>
                            <td>{{ acueducto[5] }}</td>
                            <td>{{ acueducto[6] }}</td>
                            <td>{{ acueducto[7] }}</td>
                            <td>{{ acueducto[8] }}</td>
                            <td>{{ acueducto[9] }}</td>
                            <td>{{ acueducto[10] }}</td>
                            <td>{{ acueducto[11] }}</td>
                            <td>{{ acueducto[12] }}</td>
                            <td>{{ acueducto[13] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    
</div>
{% endblock %}
